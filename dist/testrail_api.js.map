{
  "version": 3,
  "file": "testrail_api.js",
  "sourceRoot": "../src",
  "sources": [
    "testrail_api.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "Table = require 'cli-table'\nPARAMS = ['project_id', 'suite_id', 'section_id', 'testrun_id', \"testplan_id\", \"case_id\"]\nFILTERS = ['section_id', 'suite_id']\nREQUESTS =\n  addPlanEntry: 'add_plan_entry/{{testplan_id}}'\n  getCases: 'get_cases/{{project_id}}&suite_id={{suite_id}}&section_id={{section_id}}'\n  addResults: 'add_results_for_cases/{{testrun_id}}'\n  addResultsPerCase: 'add_result_for_case/{{testrun_id}}/{{case_id}}'\n\nRequestManager = require './request_manager'\n\nclass TestRailApi\n\n  constructor: (@config = {}, @opts = {}, @suite_config = {}, @metrics = []) ->\n    @request_manager = new RequestManager @opts\n\n  addResults: (testrun_id) ->\n    url = @_generateUrl 'addResults', {testrun_id}\n    yield @request_manager.send 'post', url: url, body:\n      results: @metrics\n    testrun_url = \"#{@config.testrail_url}/runs/view/#{testrun_id}\"\n    console.log \"Successfully added the following results for project symbol #{@suite_config.project_symbol} to TestRail. Visit #{testrun_url} to access.\"\n\n  addResultsPerCase: (testrun_id) ->\n    for metric in @metrics\n      case_id = metric.case_id\n      url = @_generateUrl 'addResultsPerCase', {testrun_id, case_id}\n      status_id =  metric.status_id\n      yield @request_manager.send 'post', url: url, body:\n        status_id: status_id\n\n  fetchCases: ->\n    resp = yield @request_manager.send 'get', url: @_generateUrl 'getCases'\n    resp.map ({id}) -> id\n\n  generateTestRun: (case_ids, testplan_id) ->\n    url = @_generateUrl 'addPlanEntry', {testplan_id}\n    body =\n      suite_id: @suite_config.suite_id\n      name: \"#{@opts.runname} - #{(new Date()).toLocaleDateString()}\"\n      include_all: false\n      case_ids: case_ids\n    resp = yield @request_manager.send 'post', {url, body}\n    resp.runs[resp.runs.length - 1].id\n\n  _generateUrl: (type, opts = {}) ->\n    action = REQUESTS[type] or ''\n    PARAMS.forEach (key) =>\n      action = action.replace(\"{{#{key}}}\", @suite_config[key]) if @suite_config[key] isnt undefined and opts[key] is undefined\n      action = action.replace(\"&#{key}={{#{key}}}\", '') unless @suite_config[key] isnt undefined and FILTERS.indexOf(key) isnt -1\n      action = action.replace(\"{{#{key}}}\", opts[key]) unless opts[key] is undefined\n    \"#{@config.testrail_url}/api/v2/#{action}\"\n\nmodule.exports = TestRailApi\n"
  ]
}